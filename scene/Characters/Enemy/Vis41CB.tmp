[gd_scene load_steps=4 format=3 uid="uid://bog6nvsalpfma"]

[ext_resource type="PackedScene" uid="uid://dn3me4ld1wn8x" path="res://scene/Characters/Enemy/base-Zombie.tscn" id="1_lttvb"]
[ext_resource type="Texture2D" uid="uid://78qbry0e5ahd" path="res://GFX/PNG/Tiles/tile_17.png" id="3_jhpw1"]

[sub_resource type="GDScript" id="GDScript_qauuh"]
script/source = "extends \"res://scene/Characters/Enemy/base-Zombie.gd\"

func _ready():
	Fov_Tolerance=45
	Fov_Distance=200
	first_position=self.position

func _process(delta):
	Player_is_in_Fov_Telorance()
	call_other_zombies()
	
func call_other_zombies():
	if player_in_tolarance:
		var zombies = get_tree().get_nodes_in_group(\"S-B-Zombie\")
		for zombie in zombies:
			if zombie.position.distance_to(position) < 2000:
				zombie.look_at(Player.global_position)

func _draw():
	var start_angle = self.rotation-Fov_Distance/2
	var end_angle = self.rotation+Fov_Distance/2
	var start_vector = self.position.rotated(start_angle)
	var end_vector = Vector2(Fov_Distance, 0).rotated(end_angle)
	
	draw_polygon([Vector2(0, 0), start_vector, end_vector],[0, 255, 0])
"

[node name="Base-Zombie" instance=ExtResource("1_lttvb")]
script = SubResource("GDScript_qauuh")

[node name="Sprite2D" parent="." index="0"]
rotation = 1.57035
scale = Vector2(0.48, 1)
texture = ExtResource("3_jhpw1")
